<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lswd.youpin.dao.PersonInfoMapper">
  <resultMap id="BaseResultMap" type="com.lswd.youpin.model.PersonInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="State" jdbcType="INTEGER" property="state" />
    <result column="Number" jdbcType="VARCHAR" property="number" />
    <result column="CardNo" jdbcType="VARCHAR" property="cardNo" />
    <result column="Name" jdbcType="VARCHAR" property="name" />
    <result column="Leave" jdbcType="INTEGER" property="leave" />
    <result column="LeaveName" jdbcType="VARCHAR" property="leaveName" />
    <result column="Balance" jdbcType="DECIMAL" property="balance" />
    <result column="Subsidy" jdbcType="DECIMAL" property="subSidy" />
    <result column="Deposit" jdbcType="DECIMAL" property="deposit" />
    <result column="RecIndex" jdbcType="INTEGER" property="recIndex" />
    <result column="IDNO" jdbcType="VARCHAR" property="idNo" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="Note" jdbcType="VARCHAR" property="note" />
    <result column="OpenTime" jdbcType="TIMESTAMP" property="openTime" />
    <result column="Operator" jdbcType="VARCHAR" property="operator" />
    <result column="LastAddMoneyTime" jdbcType="TIMESTAMP" property="lastAddMoneyTime" />
  </resultMap>
  <select id="getAll"  resultType="com.lswd.youpin.model.PersonInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    ID as id,State as state,Number as number,CardNo as cardNo,name,
    Leave as leave,LeaveName as leaveName,Balance as balance,Subsidy as subSidy,
    Deposit as deposit,RecIndex as recIndex,IDNO as idNo,phone,Note as note,
    OpenTime as openTime,Operator as operator,LastAddMoneyTime as lastAddMoneyTime
    from PersonInfo
  </select>

  <select id="getPersonInfoTime"  resultType="com.lswd.youpin.model.PersonInfo">
    select
      ID as id,State as state,Number as number,CardNo as cardNo,name,
      Leave as leave,LeaveName as leaveName,Balance as balance,Subsidy as subSidy,
      Deposit as deposit,RecIndex as recIndex,IDNO as idNo,phone,Note as note,
      OpenTime as openTime,Operator as operator,LastAddMoneyTime as lastAddMoneyTime
    from PersonInfo WHERE openTime BETWEEN #{startTime} AND #{endTime}
  </select>


  <resultMap id="getStuCountClassMap" type="com.lswd.youpin.model.vo.PersonInfoCount">
    <result column="className" jdbcType="VARCHAR" property="className" />
    <result column="studentCount" jdbcType="INTEGER" property="studentCount" />
  </resultMap>
  <select id="getStuCountClass"  resultMap="getStuCountClassMap">
    select  Note as className,COUNT(ID) as studentCount from PersonInfo where ID  &lt; 1500 GROUP BY Note ORDER BY Note
  </select>


  <select id="getRegionStudentCount"  resultType="com.lswd.youpin.model.PersonInfo">
    select
      ID as id,State as state,Number as number,CardNo as cardNo,name,
      Leave as leave,LeaveName as leaveName,Balance as balance,Subsidy as subSidy,
      Deposit as deposit,RecIndex as recIndex,IDNO as idNo,phone,Note as note,
      OpenTime as openTime,Operator as operator,LastAddMoneyTime as lastAddMoneyTime
    from PersonInfo where ID &lt; 1500
  </select>


  <insert id="insertPersonInfoStudent" parameterType="com.lswd.youpin.model.PersonInfo">
    insert into PersonInfo(ID,State, Number,CardNo,Name,Leave,LeaveName,DepartID,DepartName,CardType,RecIndex,IDNO,Note)
      values(#{id,jdbcType=INTEGER},#{state,jdbcType=INTEGER}, #{number,jdbcType=VARCHAR},#{cardNo,jdbcType=VARCHAR},
      #{name,jdbcType=VARCHAR},1,'学生卡',1,'软件部','计费卡',0,#{idNo,jdbcType=VARCHAR},#{note,jdbcType=VARCHAR})
  </insert>

  <insert id="insertPersonInfoTeacher" parameterType="com.lswd.youpin.model.PersonInfo">
    insert into PersonInfo(ID,State, Number,CardNo,Name,Leave,LeaveName,DepartID,DepartName,CardType,RecIndex,IDNO,Note)
    values(#{id,jdbcType=INTEGER},#{state,jdbcType=INTEGER}, #{number,jdbcType=VARCHAR},#{cardNo,jdbcType=VARCHAR},
    #{name,jdbcType=VARCHAR},2,'教师卡',1,'软件部','计费卡',0,#{idNo,jdbcType=VARCHAR},#{note,jdbcType=VARCHAR})
  </insert>
  
</mapper>